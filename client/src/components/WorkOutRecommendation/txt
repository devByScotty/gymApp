import React, { useState } from 'react';
import { Box, Typography, Button } from '@mui/material';
import axios from 'axios';

const WorkoutRecommendation = ({ setSelectedWorkout }) => {

  const [loading, setLoading] = useState(false);
  const [data,setData] = useState()
  // This function will update the selected workout type
  const handleRecommendationClick = async () => {
    setLoading(true);
    try {
      const options = {
        method: 'GET',
        url: 'https://exercisedb.p.rapidapi.com/exercises',
        headers: {
          'x-rapidapi-key': 'bc599bb1demshf61171446bed130p11b96fjsnbfcdab82b4ad',
          'x-rapidapi-host': 'exercisedb.p.rapidapi.com'
        },
      };

      const response = await axios.request(options);
      // You can filter or map this data to create a user-specific workout plan
      const filteredWorkoutPlan = response.data.slice(0, 5); // Example: Limiting to 5 exercises for now
      setSelectedWorkout(filteredWorkoutPlan);
      data = response.data;
    }


    catch (error) {
      console.error('Error fetching new workout plan:', error);
    } finally {
      setLoading(false);
    }
  };

  console.log(data);

  return (
    <Box>
      <Typography variant="subtitle1" sx={{ mt: 3 }}>
        Choose Your Workout Plan
      </Typography>

      {/* Chest & Arms Workout Recommendation */}
      <Box
        sx={{
          backgroundColor: '#222',
          borderRadius: 2,
          mt: 2,
          p: 2,
          display: 'flex',
          flexDirection: 'column',
          alignItems: 'center',
        }}
      >
        <Box
          component="img"
          src="https://images.unsplash.com/photo-1507398941214-572c25f4b1dc?q=80&w=1673&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
          alt="Workout Image"
          sx={{ borderRadius: 2, width: '100%', mb: 2 }}
        />
        <Typography variant="h5">CHEST & ARMS</Typography>
        <Typography
          sx={{ backgroundColor: '#C7FF00', color: '#000', borderRadius: 1, px: 1, mt: 1 }}
        >
          Recommended
        </Typography>
        <Typography variant="subtitle2" sx={{ mt: 1 }}>
          Dynamic Warmup | 22 Minutes
        </Typography>

        {/* Button to select this workout */}
       
        
          <Button
            variant="contained"
            sx={{ mt: 2, backgroundColor: '#C7FF00', color: '#000' }}
            onClick={() => handleRecommendationClick('chest-arms')}
          >
            Select Chest & Arms
          </Button>

      </Box>
    </Box>



  );
};

export default WorkoutRecommendation;